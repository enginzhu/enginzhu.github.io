---
layout: post
title: HTML5 扫雷游戏
categories: HTML5
tags: game
thread: mineSweeper
---

## 源码

- 基于`egret引擎`写了一个[扫雷游戏](http://github.shanechu.com/mineSweeper/index.html)
- 源码托管在github仓库上：[扫雷游戏源码](https://github.com/enginzhu/MineSweeper)
- `egret`的API设计和使用很大程度上跟`AS3`相同，极大方便了`AS3`开发者的上手

## 扫雷游戏需求

- 初始化游戏
	- 初始化棋盘，每开始一局新的游戏，则随机生成地雷位置
	- 遍历棋盘格子，为每个格子计算其邻近的地雷数，并用数字标识
- 扫雷过程中玩家翻开格子，则显示该格子实际内容
	- 当格子为地雷，则游戏结束
	- 当格子为空白，则广度优先搜索邻近的格子（使用open和close列表法），尽可能多地翻开无提示的格子
	- 每次翻开格子都检查当前棋盘状态，如果所有无地雷格子都已被检查则视为游戏胜利

## 数据结构

- 一个二值化的棋盘二维数组（1代表有雷，0代表无雷）
- 一个棋盘格子显示对象的二维数组
- 搜索算法中，`openList`保存所有待检查的格子，初始只有一个元素（即当此点击的格子）
	- 遍历`openList`，每次取出一个元素（取出的元素放进`closeList`），检查该格子的上下左右邻近4个格子
	- 将4个邻近格子继续压进`openList`
		- 如果格子已在`closeList`，则不用再重复检查
		- 如果格子有数字提示（附近有雷），也不用继续检查了

## 其它拓展玩法

- 当此游戏记录游戏时间
- 游戏局数统计
- 游戏获胜比率

